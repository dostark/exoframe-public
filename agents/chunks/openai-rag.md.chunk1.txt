1. **Inspect**: preview top-matching chunks for the task query.
2. **Inject**: inject top chunks into the prompt as a context block.
3. **Act**: propose a minimal diff (apply_patch-ready) that follows the retrieved instructions.
4. **Verify**: state which tests/linters to run.

## Tools

### Inspect embeddings

```bash
# Preview what retrieval will pick up
deno run --allow-read scripts/inspect_embeddings.ts --query "write tests for ConfigLoader" --top 8
```

Use this to confirm youâ€™re pulling the right areas (tests helpers, service patterns, provider notes) before you inject anything.

### Inject agent context

```bash
# Inject the top 4 chunks for a query into a JSON payload
deno run --allow-read scripts/inject_agent_context.ts openai "write tests for ConfigLoader" 4
```