// GOOD: Base class
export abstract class BaseProvider {
  constructor(config: Config, defaults: Defaults) {
    this.apiKey = config.apiKey || Deno.env.get(defaults.envKey);
    this.model = config.model || defaults.defaultModel;
  }
}
```

### 3. Test Assertion Patterns
```typescript
// BAD: Same assertions repeated
assertEquals(result.status, "success");
assertEquals(result.data.length, 3);
assertExists(result.timestamp);

// GOOD: Custom assertion helper
assertSuccessResult(result, { dataLength: 3 });
```

## Refactoring Workflow

1. **Run jscpd** to identify duplicates
   ```bash
   npx jscpd src/ tests/ --reporters json --output ./jscpd-report
   ```