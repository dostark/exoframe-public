Deno.test("ConfigLoader: partial config merges with defaults", async () => {
  const { tempDir, cleanup } = await createCliTestContext();
  try {
    await Deno.writeTextFile(join(tempDir, "partial.toml"), 'mode = "hybrid"');
    const loader = new ConfigLoader(join(tempDir, "partial.toml"));
    const cfg = await loader.load();
    assertEquals(cfg.mode, "hybrid");
    assertEquals(cfg.portals, []); // default value
  } finally {
    await cleanup();
  }
});
```

Now run these tests (they should fail), then I'll implement the error handling.
```

### Refactoring