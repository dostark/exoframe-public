{
  "path": ".copilot/planning/phase-12.5-memory-bank-enhanced.md",
  "title": "phase-12.5-memory-bank-enhanced.md",
  "vecs": [
    {
      "text": "# Phase 12.5+: Memory Banks v2 Enhanced Architecture\n\n**Document Version:** 1.3.0\n**Date:** 2026-01-04\n**Author:** Architecture Agent\n**Status:** IN PROGRESS (Phase 12.5 ✅, Phase 12.8 ✅, Phase 12.9 ✅, Phase 12.10 ✅, Phase 12.11 ✅, Phase 12.12 ✅, Phase 12.13 ✅, Phase 12.14 ✅)\n**Parent Phase:** [Phase 12: Obsidian Retirement](phase-12-obsidian-retirement.md)\n**Target Release:** v1.1\n\n---\n\n## Table of Contents",
      "vector": [
        0.6352941176470588,
        0.3764705882352941,
        0.7529411764705882,
        0.596078431372549,
        0.8941176470588236,
        0.6941176470588235,
        0.6901960784313725,
        0.3843137254901961,
        0.3176470588235294,
        0.7411764705882353,
        0.8941176470588236,
        0.8549019607843137,
        0.5176470588235295,
        0.5647058823529412,
        0.5764705882352941,
        0.5254901960784314,
        0.47843137254901963,
        0.9921568627450981,
        0.1803921568627451,
        0.5607843137254902,
        0.37254901960784315,
        0.7764705882352941,
        0.3137254901960784,
        0.4627450980392157,
        0.5098039215686274,
        0.8156862745098039,
        0.9137254901960784,
        0.8352941176470589,
        0.027450980392156862,
        0.29411764705882354,
        0.23137254901960785,
        0.7529411764705882,
        0.6352941176470588,
        0.3764705882352941,
        0.7529411764705882,
        0.596078431372549,
        0.8941176470588236,
        0.6941176470588235,
        0.6901960784313725,
        0.3843137254901961,
        0.3176470588235294,
        0.7411764705882353,
        0.8941176470588236,
        0.8549019607843137,
        0.5176470588235295,
        0.5647058823529412,
        0.5764705882352941,
        0.5254901960784314,
        0.47843137254901963,
        0.9921568627450981,
        0.1803921568627451,
        0.5607843137254902,
        0.37254901960784315,
        0.7764705882352941,
        0.3137254901960784,
        0.4627450980392157,
        0.5098039215686274,
        0.8156862745098039,
        0.9137254901960784,
        0.8352941176470589,
        0.027450980392156862,
        0.29411764705882354,
        0.23137254901960785,
        0.7529411764705882
      ]
    },
    {
      "text": "1. [Executive Summary](#1-executive-summary)\n2. [Gap Analysis: Current vs. Desired State](#2-gap-analysis)\n3. [Reference Architecture Survey](#3-reference-architecture-survey)\n4. [Enhanced Architecture Design](#4-enhanced-architecture-design)\n5. [Data Format Decisions](#5-data-format-decisions)\n6. [Embedding Reuse Strategy](#6-embedding-reuse-strategy)\n7. [Implementation Phases](#7-implementation-phases)\n8. [Rollback Plan](#8-rollback-plan)\n9. [Success Metrics](#9-success-metrics)\n10. [References](#10-references)\n\n---\n\n## 1. Executive Summary\n\nThis document extends the Memory Banks architecture defined in Phase 12 with advanced capabilities inspired by production memory systems (mem0, MemGPT, Zep, LangMem). The enhancements focus on:",
      "vector": [
        0.4588235294117647,
        0.5647058823529412,
        0.5215686274509804,
        0.9725490196078431,
        0.9490196078431372,
        0.19607843137254902,
        0.3215686274509804,
        0.18823529411764706,
        0.7333333333333333,
        0.4196078431372549,
        0.5058823529411764,
        0.5607843137254902,
        0.4666666666666667,
        0.5019607843137255,
        0.21176470588235294,
        0.43137254901960786,
        0.49411764705882355,
        0.41568627450980394,
        0.8313725490196079,
        0.7529411764705882,
        0.4627450980392157,
        0.18823529411764706,
        0.3686274509803922,
        0.7137254901960784,
        0.4627450980392157,
        0.6470588235294118,
        0.17647058823529413,
        0.9333333333333333,
        0.9921568627450981,
        0.5372549019607843,
        0.6588235294117647,
        0.43137254901960786,
        0.4588235294117647,
        0.5647058823529412,
        0.5215686274509804,
        0.9725490196078431,
        0.9490196078431372,
        0.19607843137254902,
        0.3215686274509804,
        0.18823529411764706,
        0.7333333333333333,
        0.4196078431372549,
        0.5058823529411764,
        0.5607843137254902,
        0.4666666666666667,
        0.5019607843137255,
        0.21176470588235294,
        0.43137254901960786,
        0.49411764705882355,
        0.41568627450980394,
        0.8313725490196079,
        0.7529411764705882,
        0.4627450980392157,
        0.18823529411764706,
        0.3686274509803922,
        0.7137254901960784,
        0.4627450980392157,
        0.6470588235294118,
        0.17647058823529413,
        0.9333333333333333,
        0.9921568627450981,
        0.5372549019607843,
        0.6588235294117647,
        0.43137254901960786
      ]
    },
    {
      "text": "- **Global Memory Scope** - Cross-project learnings in `Memory/Global/`\n- **Agent-Driven Memory Updates** - Automated memory extraction with user notification\n- **Simple RAG Implementation** - Keyword/tag-based search without external dependencies\n- **Comprehensive CLI Surface** - Unified `exoctl memory` command tree\n- **Integration Points** - Seamless integration with `agents/manifest` and Activity Journal\n\n### Key Design Decisions",
      "vector": [
        0.8666666666666667,
        0.3568627450980392,
        0.35294117647058826,
        0.6705882352941176,
        0.611764705882353,
        0.9098039215686274,
        0.403921568627451,
        0.3137254901960784,
        0.2784313725490196,
        0.8666666666666667,
        0.2901960784313726,
        0.7568627450980392,
        0.6431372549019608,
        0.21568627450980393,
        0.09411764705882353,
        0.5254901960784314,
        0.7137254901960784,
        0.47843137254901963,
        0.09803921568627451,
        0.4823529411764706,
        0.7176470588235294,
        0.788235294117647,
        1,
        0.7019607843137254,
        0.13725490196078433,
        0.3686274509803922,
        0.4196078431372549,
        0.9254901960784314,
        0.6470588235294118,
        0.2901960784313726,
        0.6901960784313725,
        0.6627450980392157,
        0.8666666666666667,
        0.3568627450980392,
        0.35294117647058826,
        0.6705882352941176,
        0.611764705882353,
        0.9098039215686274,
        0.403921568627451,
        0.3137254901960784,
        0.2784313725490196,
        0.8666666666666667,
        0.2901960784313726,
        0.7568627450980392,
        0.6431372549019608,
        0.21568627450980393,
        0.09411764705882353,
        0.5254901960784314,
        0.7137254901960784,
        0.47843137254901963,
        0.09803921568627451,
        0.4823529411764706,
        0.7176470588235294,
        0.788235294117647,
        1,
        0.7019607843137254,
        0.13725490196078433,
        0.3686274509803922,
        0.4196078431372549,
        0.9254901960784314,
        0.6470588235294118,
        0.2901960784313726,
        0.6901960784313725,
        0.6627450980392157
      ]
    },
    {
      "text": "| Decision | Rationale |\n|----------|-----------|\n| **Markdown for human-readable content** | Patterns, decisions, learnings stored as `.md` for developer review |\n| **JSON for structured indices** | Fast programmatic access for search and filtering |\n| **No external vector DB** | Reuse `agents/embeddings/` pattern with mock vectors |\n| **CLI-first interface** | Both users and agents interact via `exoctl memory` |\n| **Pending → Approved workflow** | User notification before memory updates are finalized |\n\n### Dependencies\n\n- Phase 12.1-12.4: Memory Banks Architecture (COMPLETED ✅)\n- `src/services/memory_bank.ts`: Core CRUD operations (COMPLETED ✅)\n- `agents/embeddings/`: Precomputed embedding infrastructure (AVAILABLE ✅)\n\n---\n\n## 2. Gap Analysis\n\n### 2.1 Current State (Phase 12.1-12.4)",
      "vector": [
        0.3215686274509804,
        0.9725490196078431,
        0.1843137254901961,
        0.8,
        0.9254901960784314,
        0.40784313725490196,
        0.25882352941176473,
        0.44313725490196076,
        0.9568627450980393,
        0.8509803921568627,
        0.27450980392156865,
        0.4980392156862745,
        0.4235294117647059,
        0.7254901960784313,
        0.13725490196078433,
        0.7607843137254902,
        0.1843137254901961,
        0.4392156862745098,
        0.45098039215686275,
        0.6980392156862745,
        0.9882352941176471,
        0.5058823529411764,
        0.7294117647058823,
        0.3607843137254902,
        0.6,
        0.03529411764705882,
        0.3215686274509804,
        0.4,
        0.7215686274509804,
        0.12156862745098039,
        0.01568627450980392,
        0.8352941176470589,
        0.3215686274509804,
        0.9725490196078431,
        0.1843137254901961,
        0.8,
        0.9254901960784314,
        0.40784313725490196,
        0.25882352941176473,
        0.44313725490196076,
        0.9568627450980393,
        0.8509803921568627,
        0.27450980392156865,
        0.4980392156862745,
        0.4235294117647059,
        0.7254901960784313,
        0.13725490196078433,
        0.7607843137254902,
        0.1843137254901961,
        0.4392156862745098,
        0.45098039215686275,
        0.6980392156862745,
        0.9882352941176471,
        0.5058823529411764,
        0.7294117647058823,
        0.3607843137254902,
        0.6,
        0.03529411764705882,
        0.3215686274509804,
        0.4,
        0.7215686274509804,
        0.12156862745098039,
        0.01568627450980392,
        0.8352941176470589
      ]
    },
    {
      "text": "| Capability | Status | Implementation |\n|------------|--------|----------------|\n| Project Memory | ✅ | `Memory/Projects/{portal}/` |\n| Execution History | ✅ | `Memory/Execution/{trace-id}/` |\n| Activity Journal Integration | ✅ | SQLite logging via `DatabaseService` |\n| Search (basic) | ✅ | `searchMemory()` in MemoryBankService |\n| CLI Commands | ❌ | Not implemented |\n| Global Memory | ❌ | Not implemented |\n| Agent Memory Updates | ❌ | Not implemented |\n| Semantic/RAG Search | ❌ | Not implemented |\n| User Notification | ❌ | Not implemented |\n\n### 2.2 Desired State (Memory Banks v2)",
      "vector": [
        0,
        0.25098039215686274,
        0.8901960784313725,
        0.9764705882352941,
        0.9019607843137255,
        0.043137254901960784,
        0.32941176470588235,
        0.37254901960784315,
        0.7803921568627451,
        0.6313725490196078,
        0.027450980392156862,
        0,
        0.7450980392156863,
        0.22745098039215686,
        0.4235294117647059,
        0.6980392156862745,
        0.8549019607843137,
        0.9647058823529412,
        0.1803921568627451,
        0.8745098039215686,
        0.49019607843137253,
        0.5058823529411764,
        0.7098039215686275,
        0.12156862745098039,
        0.20784313725490197,
        0.5647058823529412,
        0.21176470588235294,
        0.3803921568627451,
        0.9098039215686274,
        0.06666666666666667,
        0.13725490196078433,
        0.34901960784313724,
        0,
        0.25098039215686274,
        0.8901960784313725,
        0.9764705882352941,
        0.9019607843137255,
        0.043137254901960784,
        0.32941176470588235,
        0.37254901960784315,
        0.7803921568627451,
        0.6313725490196078,
        0.027450980392156862,
        0,
        0.7450980392156863,
        0.22745098039215686,
        0.4235294117647059,
        0.6980392156862745,
        0.8549019607843137,
        0.9647058823529412,
        0.1803921568627451,
        0.8745098039215686,
        0.49019607843137253,
        0.5058823529411764,
        0.7098039215686275,
        0.12156862745098039,
        0.20784313725490197,
        0.5647058823529412,
        0.21176470588235294,
        0.3803921568627451,
        0.9098039215686274,
        0.06666666666666667,
        0.13725490196078433,
        0.34901960784313724
      ]
    },
    {
      "text": "| Capability | Priority | Phase |\n|------------|----------|-------|\n| Core CLI Commands | HIGH | 12.5 |\n| Global Memory (`Memory/Global/`) | HIGH | 12.8 |\n| Memory Promote/Demote | MEDIUM | 12.8 |\n| Agent Memory Extraction | HIGH | 12.9 |\n| Pending/Approval Workflow | MEDIUM | 12.9 |\n| User Notification | MEDIUM | 12.9 |\n| Tag-Based Search | HIGH | 12.10 |\n| Simple RAG (no external deps) | LOW | 12.10 |\n\n### 2.3 Feature Gap Summary",
      "vector": [
        0.06666666666666667,
        0.7294117647058823,
        0.7607843137254902,
        0.011764705882352941,
        0.8784313725490196,
        0.6392156862745098,
        0.3254901960784314,
        0.8627450980392157,
        0.49411764705882355,
        0.4392156862745098,
        0.2549019607843137,
        0.2980392156862745,
        0.4627450980392157,
        0.34901960784313724,
        0.03137254901960784,
        0.24705882352941178,
        0.38823529411764707,
        0.043137254901960784,
        0.7568627450980392,
        0.3333333333333333,
        0.6784313725490196,
        0.3607843137254902,
        0.8117647058823529,
        1,
        0.12549019607843137,
        0.6588235294117647,
        0.6862745098039216,
        0.8274509803921568,
        0.6,
        0.803921568627451,
        0.06666666666666667,
        0.33725490196078434,
        0.06666666666666667,
        0.7294117647058823,
        0.7607843137254902,
        0.011764705882352941,
        0.8784313725490196,
        0.6392156862745098,
        0.3254901960784314,
        0.8627450980392157,
        0.49411764705882355,
        0.4392156862745098,
        0.2549019607843137,
        0.2980392156862745,
        0.4627450980392157,
        0.34901960784313724,
        0.03137254901960784,
        0.24705882352941178,
        0.38823529411764707,
        0.043137254901960784,
        0.7568627450980392,
        0.3333333333333333,
        0.6784313725490196,
        0.3607843137254902,
        0.8117647058823529,
        1,
        0.12549019607843137,
        0.6588235294117647,
        0.6862745098039216,
        0.8274509803921568,
        0.6,
        0.803921568627451,
        0.06666666666666667,
        0.33725490196078434
      ]
    },
    {
      "text": "```\n┌─────────────────────────────────────────────────────────────────┐\n│                    Memory Banks Feature Gap                     │\n├─────────────────────────────────────────────────────────────────┤\n│  CURRENT (v1)          │  GAP              │  TARGET (v2)       │\n├─────────────────────────────────────────────────────────────────┤\n│  Project-scoped only   │  → Global scope   │  Global + Project  │\n│  Manual updates        │  → Automation     │  Agent-driven      │\n│  No CLI                │  → Full CLI       │  exoctl memory     │\n│  Basic text search     │  → Tag + keyword  │  Simple RAG        │\n│  Silent operations     │  → Notification   │  User approval     │\n│  JSON-heavy            │  → Markdown-first │  Human-readable    │\n└─────────────────────────────────────────────────────────────────┘\n```",
      "vector": [
        0.24705882352941178,
        0.3215686274509804,
        0.9803921568627451,
        0.33725490196078434,
        0.11372549019607843,
        0.26666666666666666,
        0.9058823529411765,
        0.3803921568627451,
        0.7411764705882353,
        0.27058823529411763,
        0.13725490196078433,
        0.7568627450980392,
        0.49411764705882355,
        0.20392156862745098,
        0.9294117647058824,
        0.23921568627450981,
        0.8235294117647058,
        0.4666666666666667,
        0.06274509803921569,
        0.41568627450980394,
        0.6666666666666666,
        0.08235294117647059,
        0.7607843137254902,
        0.24705882352941178,
        0.7333333333333333,
        0.9294117647058824,
        0.06274509803921569,
        0.38823529411764707,
        0.6705882352941176,
        0.23137254901960785,
        0.5882352941176471,
        0.3215686274509804,
        0.24705882352941178,
        0.3215686274509804,
        0.9803921568627451,
        0.33725490196078434,
        0.11372549019607843,
        0.26666666666666666,
        0.9058823529411765,
        0.3803921568627451,
        0.7411764705882353,
        0.27058823529411763,
        0.13725490196078433,
        0.7568627450980392,
        0.49411764705882355,
        0.20392156862745098,
        0.9294117647058824,
        0.23921568627450981,
        0.8235294117647058,
        0.4666666666666667,
        0.06274509803921569,
        0.41568627450980394,
        0.6666666666666666,
        0.08235294117647059,
        0.7607843137254902,
        0.24705882352941178,
        0.7333333333333333,
        0.9294117647058824,
        0.06274509803921569,
        0.38823529411764707,
        0.6705882352941176,
        0.23137254901960785,
        0.5882352941176471,
        0.3215686274509804
      ]
    },
    {
      "text": "---\n\n## 3. Reference Architecture Survey\n\n### 3.1 Industry Memory Systems\n\n| System | Key Innovation | Relevance to ExoFrame |\n|--------|----------------|----------------------|\n| **mem0** | Adaptive memory layers (user/agent/session) | Multi-scope memory hierarchy |\n| **MemGPT** | Self-editing memory with archival system | Agent-managed memory updates |\n| **Zep** | Temporal awareness + entity extraction | Pattern extraction from executions |\n| **LangMem** | Semantic memory graphs | Tag-based relationship mapping |\n\n### 3.2 Patterns to Adopt\n\n1. **Memory Hierarchy (mem0)**\n   - Global → Project → Execution → Session\n   - Promote/demote between levels",
      "vector": [
        0.7411764705882353,
        0.8431372549019608,
        0.6313725490196078,
        0.4196078431372549,
        0.39215686274509803,
        0.7725490196078432,
        0.09803921568627451,
        0.4117647058823529,
        0.25882352941176473,
        0.788235294117647,
        0.18823529411764706,
        0.047058823529411764,
        0.1411764705882353,
        0.6509803921568628,
        0.9254901960784314,
        0.027450980392156862,
        0.41568627450980394,
        0.2823529411764706,
        0.7019607843137254,
        0.1568627450980392,
        0.9372549019607843,
        0.23137254901960785,
        0.3764705882352941,
        0.7215686274509804,
        0.09411764705882353,
        0.8862745098039215,
        0.03529411764705882,
        0.7490196078431373,
        0.047058823529411764,
        0.3607843137254902,
        0.44313725490196076,
        0.20392156862745098,
        0.7411764705882353,
        0.8431372549019608,
        0.6313725490196078,
        0.4196078431372549,
        0.39215686274509803,
        0.7725490196078432,
        0.09803921568627451,
        0.4117647058823529,
        0.25882352941176473,
        0.788235294117647,
        0.18823529411764706,
        0.047058823529411764,
        0.1411764705882353,
        0.6509803921568628,
        0.9254901960784314,
        0.027450980392156862,
        0.41568627450980394,
        0.2823529411764706,
        0.7019607843137254,
        0.1568627450980392,
        0.9372549019607843,
        0.23137254901960785,
        0.3764705882352941,
        0.7215686274509804,
        0.09411764705882353,
        0.8862745098039215,
        0.03529411764705882,
        0.7490196078431373,
        0.047058823529411764,
        0.3607843137254902,
        0.44313725490196076,
        0.20392156862745098
      ]
    },
    {
      "text": "2. **Memory Curation (MemGPT)**\n   - Agent proposes memory updates\n   - User approves before finalization\n   - Automatic archival of stale entries\n\n3. **Pattern Extraction (Zep)**\n   - Extract learnings from execution results\n   - Link related patterns across projects\n\n4. **Simple Retrieval (LangMem)**\n   - Tag-based categorization\n   - Keyword search without vector DB\n   - Optional embedding for fuzzy match\n\n### 3.3 Patterns to Avoid",
      "vector": [
        0.13333333333333333,
        0.09019607843137255,
        0.7294117647058823,
        0.8588235294117647,
        0.8941176470588236,
        0.48627450980392156,
        0.20784313725490197,
        0.058823529411764705,
        0.9372549019607843,
        0.48627450980392156,
        0.9176470588235294,
        0.7372549019607844,
        0.0784313725490196,
        0.22745098039215686,
        0.6823529411764706,
        0.19215686274509805,
        0.6274509803921569,
        0.2901960784313726,
        0.9019607843137255,
        0.07450980392156863,
        0.34901960784313724,
        0.9686274509803922,
        0.4392156862745098,
        0.6784313725490196,
        0.19607843137254902,
        0.058823529411764705,
        0.09803921568627451,
        0.9882352941176471,
        0.6549019607843137,
        0.2823529411764706,
        0.5490196078431373,
        0.011764705882352941,
        0.13333333333333333,
        0.09019607843137255,
        0.7294117647058823,
        0.8588235294117647,
        0.8941176470588236,
        0.48627450980392156,
        0.20784313725490197,
        0.058823529411764705,
        0.9372549019607843,
        0.48627450980392156,
        0.9176470588235294,
        0.7372549019607844,
        0.0784313725490196,
        0.22745098039215686,
        0.6823529411764706,
        0.19215686274509805,
        0.6274509803921569,
        0.2901960784313726,
        0.9019607843137255,
        0.07450980392156863,
        0.34901960784313724,
        0.9686274509803922,
        0.4392156862745098,
        0.6784313725490196,
        0.19607843137254902,
        0.058823529411764705,
        0.09803921568627451,
        0.9882352941176471,
        0.6549019607843137,
        0.2823529411764706,
        0.5490196078431373,
        0.011764705882352941
      ]
    },
    {
      "text": "| Anti-Pattern | Reason | Alternative |\n|--------------|--------|-------------|\n| External vector database | Adds complexity, ExoFrame is self-contained | Reuse `agents/embeddings/` mock vectors |\n| Graph database for relations | Over-engineering for current scope | JSON indices with tag cross-references |\n| Real-time memory sync | Performance overhead | Batch updates on execution complete |\n| Auto-approve all memory | Quality control issues | User notification + approval workflow |\n\n---\n\n## 4. Enhanced Architecture Design\n\n### 4.1 Enhanced Directory Structure",
      "vector": [
        0.0784313725490196,
        0.3803921568627451,
        0.5450980392156862,
        0.4588235294117647,
        0.0392156862745098,
        0.20784313725490197,
        0.19607843137254902,
        0.7686274509803922,
        0.36470588235294116,
        0.5568627450980392,
        0.7294117647058823,
        0.7803921568627451,
        0.21176470588235294,
        0.30980392156862746,
        0.1843137254901961,
        0.34509803921568627,
        0.33725490196078434,
        0.7529411764705882,
        0.4549019607843137,
        0.5686274509803921,
        0.6980392156862745,
        0.8588235294117647,
        0.011764705882352941,
        0.8509803921568627,
        0.5686274509803921,
        0.30196078431372547,
        0.4666666666666667,
        0.1568627450980392,
        0.35294117647058826,
        0.6705882352941176,
        0.33725490196078434,
        0.47843137254901963,
        0.0784313725490196,
        0.3803921568627451,
        0.5450980392156862,
        0.4588235294117647,
        0.0392156862745098,
        0.20784313725490197,
        0.19607843137254902,
        0.7686274509803922,
        0.36470588235294116,
        0.5568627450980392,
        0.7294117647058823,
        0.7803921568627451,
        0.21176470588235294,
        0.30980392156862746,
        0.1843137254901961,
        0.34509803921568627,
        0.33725490196078434,
        0.7529411764705882,
        0.4549019607843137,
        0.5686274509803921,
        0.6980392156862745,
        0.8588235294117647,
        0.011764705882352941,
        0.8509803921568627,
        0.5686274509803921,
        0.30196078431372547,
        0.4666666666666667,
        0.1568627450980392,
        0.35294117647058826,
        0.6705882352941176,
        0.33725490196078434,
        0.47843137254901963
      ]
    },
    {
      "text": "```\nMemory/\n├── Global/                    # NEW: Cross-project learnings\n│   ├── learnings.md           # Promoted learnings (human-readable)\n│   ├── learnings.json         # Structured index for search\n│   ├── patterns.md            # Global code patterns\n│   └── anti-patterns.md       # What to avoid\n│\n├── Projects/                  # Existing: Project-specific memory\n│   └── {portal-name}/\n│       ├── overview.md\n│       ├── patterns.md\n│       ├── decisions.md\n│       ├── references.md\n│       └── context.json       # Structured data for search\n│\n├── Execution/                 # Existing: Execution history\n│   └── {trace-id}/\n│       ├── summary.md\n│       ├── context.json\n│       ├── changes.diff\n│       └── learnings.md       # NEW: Extracted learnings\n│\n├── Pending/                   # NEW: Awaiting user approval\n│   └── {timestamp}-{type}.md  # Proposed memory updates\n│\n├── Tasks/                     # Existing: Task tracking\n│   ├── active/\n│   ├── completed/\n│   └── failed/\n│\n└── Index/                     # Enhanced: Search indices\n    ├── files.json\n    ├── patterns.json\n    ├── tags.json\n    ├── learnings.json         # NEW: Learning index\n    └── embeddings/            # NEW: Optional mock embeddings\n        ├── manifest.json\n        └── {hash}.json\n```",
      "vector": [
        0.5411764705882353,
        0.7333333333333333,
        0.2627450980392157,
        0.33725490196078434,
        0.3843137254901961,
        0.8784313725490196,
        0.6666666666666666,
        0.8156862745098039,
        0.6627450980392157,
        0.5450980392156862,
        0.16470588235294117,
        0.07058823529411765,
        0.6745098039215687,
        0.43137254901960786,
        0.011764705882352941,
        0.9607843137254902,
        0.2235294117647059,
        0.16470588235294117,
        0.21568627450980393,
        0.3568627450980392,
        0.027450980392156862,
        0.3686274509803922,
        0.8274509803921568,
        0.7019607843137254,
        0.43137254901960786,
        0.3686274509803922,
        0.6862745098039216,
        0.18823529411764706,
        0.050980392156862744,
        0.9411764705882353,
        0.16470588235294117,
        0.26666666666666666,
        0.5411764705882353,
        0.7333333333333333,
        0.2627450980392157,
        0.33725490196078434,
        0.3843137254901961,
        0.8784313725490196,
        0.6666666666666666,
        0.8156862745098039,
        0.6627450980392157,
        0.5450980392156862,
        0.16470588235294117,
        0.07058823529411765,
        0.6745098039215687,
        0.43137254901960786,
        0.011764705882352941,
        0.9607843137254902,
        0.2235294117647059,
        0.16470588235294117,
        0.21568627450980393,
        0.3568627450980392,
        0.027450980392156862,
        0.3686274509803922,
        0.8274509803921568,
        0.7019607843137254,
        0.43137254901960786,
        0.3686274509803922,
        0.6862745098039216,
        0.18823529411764706,
        0.050980392156862744,
        0.9411764705882353,
        0.16470588235294117,
        0.26666666666666666
      ]
    },
    {
      "text": "### 4.2 Enhanced Schemas\n\n#### 4.2.1 Learning Schema (NEW)\n\n```typescript\n// src/schemas/memory_bank.ts\n\nexport const LearningSchema = z.object({\n  id: z.string().uuid(),\n  created_at: z.string().datetime(),\n  source: z.enum([\"execution\", \"user\", \"agent\"]),\n  source_id: z.string().optional().describe(\"trace_id or user session\"),\n\nscope: z.enum([\"global\", \"project\"]),\n  project: z.string().optional().describe(\"Portal name if project-scoped\"),\n\ntitle: z.string().max(100),\n  description: z.string().max(500),\n\ncategory: z.enum([\n    \"pattern\",        // Code pattern learned\n    \"anti-pattern\",   // What to avoid\n    \"decision\",       // Architectural choice\n    \"insight\",        // General observation\n    \"troubleshooting\" // Problem + solution\n  ]),\n\ntags: z.array(z.string()).max(10),",
      "vector": [
        0.3333333333333333,
        0.615686274509804,
        0.09411764705882353,
        0.6823529411764706,
        0.3215686274509804,
        0.9372549019607843,
        0.9372549019607843,
        0.5764705882352941,
        0.6392156862745098,
        0.9098039215686274,
        1,
        0.5176470588235295,
        0.24705882352941178,
        0.6705882352941176,
        0.2627450980392157,
        0.8196078431372549,
        0.19215686274509805,
        0.6862745098039216,
        0.6941176470588235,
        0.16470588235294117,
        0.6941176470588235,
        0.047058823529411764,
        0.5568627450980392,
        0.9372549019607843,
        0.792156862745098,
        0.5098039215686274,
        0.08235294117647059,
        0.9647058823529412,
        0.8627450980392157,
        0.5450980392156862,
        0.3411764705882353,
        0.054901960784313725,
        0.3333333333333333,
        0.615686274509804,
        0.09411764705882353,
        0.6823529411764706,
        0.3215686274509804,
        0.9372549019607843,
        0.9372549019607843,
        0.5764705882352941,
        0.6392156862745098,
        0.9098039215686274,
        1,
        0.5176470588235295,
        0.24705882352941178,
        0.6705882352941176,
        0.2627450980392157,
        0.8196078431372549,
        0.19215686274509805,
        0.6862745098039216,
        0.6941176470588235,
        0.16470588235294117,
        0.6941176470588235,
        0.047058823529411764,
        0.5568627450980392,
        0.9372549019607843,
        0.792156862745098,
        0.5098039215686274,
        0.08235294117647059,
        0.9647058823529412,
        0.8627450980392157,
        0.5450980392156862,
        0.3411764705882353,
        0.054901960784313725
      ]
    },
    {
      "text": "confidence: z.enum([\"low\", \"medium\", \"high\"]),\n\nreferences: z.array(z.object({\n    type: z.enum([\"file\", \"execution\", \"url\", \"doc\"]),\n    path: z.string(),\n  })).optional(),\n\nstatus: z.enum([\"pending\", \"approved\", \"rejected\", \"archived\"]),\n  approved_at: z.string().datetime().optional(),\n  archived_at: z.string().datetime().optional(),\n});\n\nexport type Learning = z.infer<typeof LearningSchema>;\n```\n\n#### 4.2.2 Memory Update Proposal Schema (NEW)\n\n```typescript\nexport const MemoryUpdateProposalSchema = z.object({\n  id: z.string().uuid(),\n  created_at: z.string().datetime(),\n\noperation: z.enum([\"add\", \"update\", \"promote\", \"demote\", \"archive\"]),\n  target_scope: z.enum([\"global\", \"project\"]),\n  target_project: z.string().optional(),",
      "vector": [
        0.5843137254901961,
        0.8705882352941177,
        0.6862745098039216,
        0.9333333333333333,
        0.011764705882352941,
        0.6392156862745098,
        0,
        0.47843137254901963,
        0.7764705882352941,
        0.3215686274509804,
        0.7529411764705882,
        0.3764705882352941,
        0.1843137254901961,
        0.5450980392156862,
        0.8470588235294118,
        0.4980392156862745,
        0.07058823529411765,
        0.9137254901960784,
        0.35294117647058826,
        0.29411764705882354,
        0.788235294117647,
        0.5450980392156862,
        0.5372549019607843,
        0.6078431372549019,
        0.5568627450980392,
        0.19607843137254902,
        0.403921568627451,
        0.5215686274509804,
        0.0392156862745098,
        0.6901960784313725,
        0.14901960784313725,
        0.8901960784313725,
        0.5843137254901961,
        0.8705882352941177,
        0.6862745098039216,
        0.9333333333333333,
        0.011764705882352941,
        0.6392156862745098,
        0,
        0.47843137254901963,
        0.7764705882352941,
        0.3215686274509804,
        0.7529411764705882,
        0.3764705882352941,
        0.1843137254901961,
        0.5450980392156862,
        0.8470588235294118,
        0.4980392156862745,
        0.07058823529411765,
        0.9137254901960784,
        0.35294117647058826,
        0.29411764705882354,
        0.788235294117647,
        0.5450980392156862,
        0.5372549019607843,
        0.6078431372549019,
        0.5568627450980392,
        0.19607843137254902,
        0.403921568627451,
        0.5215686274509804,
        0.0392156862745098,
        0.6901960784313725,
        0.14901960784313725,
        0.8901960784313725
      ]
    },
    {
      "text": "learning: LearningSchema.omit({ status: true, approved_at: true }),\n\nreason: z.string().describe(\"Why this update is proposed\"),\n  agent: z.string().describe(\"Agent that proposed the update\"),\n  execution_id: z.string().optional(),\n\nstatus: z.enum([\"pending\", \"approved\", \"rejected\"]),\n  reviewed_at: z.string().datetime().optional(),\n  reviewed_by: z.enum([\"user\", \"auto\"]).optional(),\n});\n\nexport type MemoryUpdateProposal = z.infer<typeof MemoryUpdateProposalSchema>;\n```\n\n#### 4.2.3 Global Memory Schema (NEW)\n\n```typescript\nexport const GlobalMemorySchema = z.object({\n  version: z.string(),\n  updated_at: z.string().datetime(),\n\nlearnings: z.array(LearningSchema),",
      "vector": [
        0.9215686274509803,
        0.7529411764705882,
        0.27450980392156865,
        0.23529411764705882,
        0.03137254901960784,
        0.5803921568627451,
        0.6196078431372549,
        0.7686274509803922,
        0.28627450980392155,
        0.9921568627450981,
        0.8784313725490196,
        0.6470588235294118,
        0.5490196078431373,
        0.5843137254901961,
        0.7529411764705882,
        0.6078431372549019,
        0.5686274509803921,
        0.5098039215686274,
        0.5098039215686274,
        0.9529411764705882,
        0.5686274509803921,
        0.3058823529411765,
        0.24313725490196078,
        0.4980392156862745,
        0.8509803921568627,
        0.13333333333333333,
        0.4117647058823529,
        0.011764705882352941,
        0.8470588235294118,
        0.06274509803921569,
        0.6,
        0.7372549019607844,
        0.9215686274509803,
        0.7529411764705882,
        0.27450980392156865,
        0.23529411764705882,
        0.03137254901960784,
        0.5803921568627451,
        0.6196078431372549,
        0.7686274509803922,
        0.28627450980392155,
        0.9921568627450981,
        0.8784313725490196,
        0.6470588235294118,
        0.5490196078431373,
        0.5843137254901961,
        0.7529411764705882,
        0.6078431372549019,
        0.5686274509803921,
        0.5098039215686274,
        0.5098039215686274,
        0.9529411764705882,
        0.5686274509803921,
        0.3058823529411765,
        0.24313725490196078,
        0.4980392156862745,
        0.8509803921568627,
        0.13333333333333333,
        0.4117647058823529,
        0.011764705882352941,
        0.8470588235294118,
        0.06274509803921569,
        0.6,
        0.7372549019607844
      ]
    },
    {
      "text": "patterns: z.array(z.object({\n    name: z.string(),\n    description: z.string(),\n    applies_to: z.array(z.string()).describe(\"Project patterns or 'all'\"),\n    examples: z.array(z.string()),\n    tags: z.array(z.string()),\n  })),\n\nanti_patterns: z.array(z.object({\n    name: z.string(),\n    description: z.string(),\n    reason: z.string(),\n    alternative: z.string(),\n    tags: z.array(z.string()),\n  })),\n\nstatistics: z.object({\n    total_learnings: z.number(),\n    by_category: z.record(z.number()),\n    by_project: z.record(z.number()),\n    last_activity: z.string().datetime(),\n  }),\n});\n\nexport type GlobalMemory = z.infer<typeof GlobalMemorySchema>;\n```\n\n### 4.3 CLI Command Tree",
      "vector": [
        0.36470588235294116,
        0.2235294117647059,
        0.7254901960784313,
        0.8,
        0.6627450980392157,
        0.6039215686274509,
        0.48627450980392156,
        0.06274509803921569,
        0.30980392156862746,
        0.403921568627451,
        0.6666666666666666,
        0.09019607843137255,
        0.8274509803921568,
        0.2627450980392157,
        0.38823529411764707,
        0.03137254901960784,
        0.9568627450980393,
        0.8901960784313725,
        0.38823529411764707,
        0.8117647058823529,
        0.3686274509803922,
        0.17254901960784313,
        0.8470588235294118,
        0.8235294117647058,
        0.20392156862745098,
        0.20784313725490197,
        0.8862745098039215,
        0.5137254901960784,
        0.9137254901960784,
        0.03137254901960784,
        0.27058823529411763,
        0.12549019607843137,
        0.36470588235294116,
        0.2235294117647059,
        0.7254901960784313,
        0.8,
        0.6627450980392157,
        0.6039215686274509,
        0.48627450980392156,
        0.06274509803921569,
        0.30980392156862746,
        0.403921568627451,
        0.6666666666666666,
        0.09019607843137255,
        0.8274509803921568,
        0.2627450980392157,
        0.38823529411764707,
        0.03137254901960784,
        0.9568627450980393,
        0.8901960784313725,
        0.38823529411764707,
        0.8117647058823529,
        0.3686274509803922,
        0.17254901960784313,
        0.8470588235294118,
        0.8235294117647058,
        0.20392156862745098,
        0.20784313725490197,
        0.8862745098039215,
        0.5137254901960784,
        0.9137254901960784,
        0.03137254901960784,
        0.27058823529411763,
        0.12549019607843137
      ]
    },
    {
      "text": "```\nexoctl memory\n├── list                       # List all memory banks\n│   └── --format json|table|md\n│\n├── search <query>             # Search across all memory\n│   ├── --scope global|project|all\n│   ├── --tags <tags>\n│   ├── --category <category>\n│   └── --format json|table|md\n│\n├── project                    # Project memory operations\n│   ├── list                   # List all project memories\n│   ├── show <portal>          # Show project memory details\n│   ├── add-pattern <portal>   # Add pattern to project\n│   ├── add-decision <portal>  # Add decision to project\n│   └── export <portal>        # Export project memory\n│\n├── execution                  # Execution history operations\n│   ├── list                   # List recent executions\n│   │   ├── --portal <portal>\n│   │   └── --limit <n>\n│   ├── show <trace-id>        # Show execution details\n│   └── extract-learnings <trace-id>  # Extract learnings\n│\n├── global                     # Global memory operations\n│   ├── show                   # Show global memory\n│   ├── add-learning           # Add global learning\n│   ├── list-learnings         # List all learnings\n│   └── stats                  # Show memory statistics\n│\n├── pending                    # Pending updates\n│   ├── list                   # List pending updates\n│   ├── show <id>              # Show pending update details\n│   ├── approve <id>           # Approve pending update\n│   ├── reject <id>            # Reject pending update\n│   └── approve-all            # Approve all pending\n│\n├── promote <learning-id>      # Promote project→global\n│   └── --from <portal>\n│\n├── demote <learning-id>       # Demote global→project\n│   └── --to <portal>\n│\n└── rebuild-index              # Rebuild search indices\n```",
      "vector": [
        0.592156862745098,
        0.8980392156862745,
        0.050980392156862744,
        0.2549019607843137,
        0.6392156862745098,
        0.4627450980392157,
        0.6078431372549019,
        0.5058823529411764,
        0.1843137254901961,
        0.16470588235294117,
        0.1450980392156863,
        0.8745098039215686,
        0.0196078431372549,
        0.9333333333333333,
        0.48627450980392156,
        0.6666666666666666,
        0.6274509803921569,
        0.8941176470588236,
        0.8862745098039215,
        0.10588235294117647,
        0.01568627450980392,
        0.5215686274509804,
        0.5058823529411764,
        0.7176470588235294,
        0.25098039215686274,
        0.9333333333333333,
        0.34901960784313724,
        0.27450980392156865,
        0.00392156862745098,
        0.8823529411764706,
        0.3254901960784314,
        0.5882352941176471,
        0.592156862745098,
        0.8980392156862745,
        0.050980392156862744,
        0.2549019607843137,
        0.6392156862745098,
        0.4627450980392157,
        0.6078431372549019,
        0.5058823529411764,
        0.1843137254901961,
        0.16470588235294117,
        0.1450980392156863,
        0.8745098039215686,
        0.0196078431372549,
        0.9333333333333333,
        0.48627450980392156,
        0.6666666666666666,
        0.6274509803921569,
        0.8941176470588236,
        0.8862745098039215,
        0.10588235294117647,
        0.01568627450980392,
        0.5215686274509804,
        0.5058823529411764,
        0.7176470588235294,
        0.25098039215686274,
        0.9333333333333333,
        0.34901960784313724,
        0.27450980392156865,
        0.00392156862745098,
        0.8823529411764706,
        0.3254901960784314,
        0.5882352941176471
      ]
    }
  ]
}