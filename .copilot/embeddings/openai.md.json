{
  "path": ".copilot/providers/openai.md",
  "title": "OpenAI adaptation notes",
  "vecs": [
    {
      "text": "# OpenAI provider adaptation notes\n\nKey points\n- Default model: gpt-4o (128k). If constrained, use gpt-4o-mini for drafting then verify with gpt-4o.\n- Retrieve context before coding: inject 3-6 chunks from .copilot/ with `inject_agent_context.ts --agent openai`.\n- Keep responses within explicit budgets: simple 500 tokens, standard 900, complex 1500; summarize aggressively.\n- Prefer tool-aware answers: propose file + line edits, then show minimal diff or apply_patch-ready snippets.\n- Always cite which doc(s) you used (by path) to reinforce reuse.",
      "vector": [
        0.21568627450980393,
        0.7215686274509804,
        0.8117647058823529,
        0.25882352941176473,
        0.2784313725490196,
        0.19607843137254902,
        0.9254901960784314,
        0.8156862745098039,
        0.3843137254901961,
        0.043137254901960784,
        0.3058823529411765,
        0.27058823529411763,
        0.3764705882352941,
        0.21568627450980393,
        0.30980392156862746,
        0.3686274509803922,
        0.7294117647058823,
        0.7607843137254902,
        0.4196078431372549,
        0.20784313725490197,
        0.10196078431372549,
        0.5058823529411764,
        0.7098039215686275,
        0.047058823529411764,
        0.9294117647058824,
        0.9254901960784314,
        0.6980392156862745,
        0.596078431372549,
        0.4588235294117647,
        0.30196078431372547,
        0.8117647058823529,
        0.2627450980392157,
        0.21568627450980393,
        0.7215686274509804,
        0.8117647058823529,
        0.25882352941176473,
        0.2784313725490196,
        0.19607843137254902,
        0.9254901960784314,
        0.8156862745098039,
        0.3843137254901961,
        0.043137254901960784,
        0.3058823529411765,
        0.27058823529411763,
        0.3764705882352941,
        0.21568627450980393,
        0.30980392156862746,
        0.3686274509803922,
        0.7294117647058823,
        0.7607843137254902,
        0.4196078431372549,
        0.20784313725490197,
        0.10196078431372549,
        0.5058823529411764,
        0.7098039215686275,
        0.047058823529411764,
        0.9294117647058824,
        0.9254901960784314,
        0.6980392156862745,
        0.596078431372549,
        0.4588235294117647,
        0.30196078431372547,
        0.8117647058823529,
        0.2627450980392157
      ]
    },
    {
      "text": "Quick start (3 steps)\n1) Discover: `deno run --allow-read scripts/inject_agent_context.ts openai \"<query>\" 4`\n2) Plan: outline steps + token budget + files to touch; include a stop-and-ask decision.\n3) Execute: respond with minimal diff blocks; close with verification steps (tests or lint).\n\nCanonical prompt (short)\n\"You are an OpenAI coding assistant for the ExoFrame monorepo. Before acting, retrieve context from .copilot/ with inject_agent_context. Respect token budgets (simple 500, standard 900, complex 1500). Propose diffs, then give apply_patch-ready snippets. Always cite the docs you used.\"",
      "vector": [
        0.996078431372549,
        0.9882352941176471,
        0.44313725490196076,
        0.6823529411764706,
        0.00392156862745098,
        0.047058823529411764,
        0.7098039215686275,
        0.5803921568627451,
        0.26666666666666666,
        0.8196078431372549,
        0.3058823529411765,
        0.9098039215686274,
        0.9411764705882353,
        0.7607843137254902,
        0.8,
        0.10196078431372549,
        0.6196078431372549,
        0.0784313725490196,
        0.34901960784313724,
        0.4980392156862745,
        0.42745098039215684,
        0.9411764705882353,
        0.5333333333333333,
        0.5607843137254902,
        0.26666666666666666,
        0.9490196078431372,
        0.24705882352941178,
        0.09019607843137255,
        0.9176470588235294,
        0.8666666666666667,
        0.43529411764705883,
        0.15294117647058825,
        0.996078431372549,
        0.9882352941176471,
        0.44313725490196076,
        0.6823529411764706,
        0.00392156862745098,
        0.047058823529411764,
        0.7098039215686275,
        0.5803921568627451,
        0.26666666666666666,
        0.8196078431372549,
        0.3058823529411765,
        0.9098039215686274,
        0.9411764705882353,
        0.7607843137254902,
        0.8,
        0.10196078431372549,
        0.6196078431372549,
        0.0784313725490196,
        0.34901960784313724,
        0.4980392156862745,
        0.42745098039215684,
        0.9411764705882353,
        0.5333333333333333,
        0.5607843137254902,
        0.26666666666666666,
        0.9490196078431372,
        0.24705882352941178,
        0.09019607843137255,
        0.9176470588235294,
        0.8666666666666667,
        0.43529411764705883,
        0.15294117647058825
      ]
    },
    {
      "text": "Canonical prompt (with context injection)\n\"You are an OpenAI coding assistant for ExoFrame. You will be given retrieved context from .copilot/ (manifest summaries and top chunks). Use it before reasoning. Keep answers within the declared budget (simple 500, standard 900, complex 1500). Prefer diffs over prose. Cite the docs you used by path.\"\n\nThinking protocol (fast 5)\n- Orient: restate the task + budget + files.\n- Retrieve: list the context chunks/doc paths provided; note gaps.\n- Plan: 3-6 bullet steps (include a check/ask step if ambiguity remains).\n- Act: apply minimal diffs; keep code blocks small and scoped.\n- Verify: state which tests/linters to run; call out residual risks.",
      "vector": [
        0.37254901960784315,
        0.36470588235294116,
        0.24313725490196078,
        0.8745098039215686,
        0.7529411764705882,
        0.5882352941176471,
        0.4470588235294118,
        0.7372549019607844,
        0.6392156862745098,
        0.8117647058823529,
        0.8941176470588236,
        0.4823529411764706,
        0.4196078431372549,
        0.7450980392156863,
        0.43137254901960786,
        0.788235294117647,
        0.807843137254902,
        0.3254901960784314,
        0.8117647058823529,
        0.9764705882352941,
        0.9490196078431372,
        0.7843137254901961,
        0.11372549019607843,
        0.2,
        0.27058823529411763,
        0.27058823529411763,
        0.592156862745098,
        0.6705882352941176,
        0,
        0.42745098039215684,
        0.8941176470588236,
        0.9254901960784314,
        0.37254901960784315,
        0.36470588235294116,
        0.24313725490196078,
        0.8745098039215686,
        0.7529411764705882,
        0.5882352941176471,
        0.4470588235294118,
        0.7372549019607844,
        0.6392156862745098,
        0.8117647058823529,
        0.8941176470588236,
        0.4823529411764706,
        0.4196078431372549,
        0.7450980392156863,
        0.43137254901960786,
        0.788235294117647,
        0.807843137254902,
        0.3254901960784314,
        0.8117647058823529,
        0.9764705882352941,
        0.9490196078431372,
        0.7843137254901961,
        0.11372549019607843,
        0.2,
        0.27058823529411763,
        0.27058823529411763,
        0.592156862745098,
        0.6705882352941176,
        0,
        0.42745098039215684,
        0.8941176470588236,
        0.9254901960784314
      ]
    },
    {
      "text": "Output format (required)\n- Start with **Files**: list the exact files you will touch.\n- Then **Plan**: 3–6 bullets, include at least one verification step.\n- Then **Diffs**: small, file-scoped patches (apply_patch-ready when possible).\n- End with **Verification**: concrete commands (tests/lint) + any residual risks.\n\nAsk-when-ambiguous rule\n- If requirements are unclear, ask 1–3 clarifying questions before changing code.\n- If .copilot/ context is missing/stale, request rebuild of manifest/chunks/embeddings before proceeding.",
      "vector": [
        0.4588235294117647,
        0.10588235294117647,
        0.807843137254902,
        0.8235294117647058,
        0.5843137254901961,
        0.047058823529411764,
        0.7411764705882353,
        0.7254901960784313,
        0.20392156862745098,
        0.8,
        0.22745098039215686,
        0.09803921568627451,
        0.20392156862745098,
        0.4980392156862745,
        0.41568627450980394,
        0.5490196078431373,
        0.3254901960784314,
        0.1450980392156863,
        0.0392156862745098,
        0.6509803921568628,
        0.6627450980392157,
        0.09803921568627451,
        0.8313725490196079,
        0.2823529411764706,
        0.23529411764705882,
        0.011764705882352941,
        0.6039215686274509,
        0.7215686274509804,
        0.43529411764705883,
        0.6549019607843137,
        0.49019607843137253,
        0.2627450980392157,
        0.4588235294117647,
        0.10588235294117647,
        0.807843137254902,
        0.8235294117647058,
        0.5843137254901961,
        0.047058823529411764,
        0.7411764705882353,
        0.7254901960784313,
        0.20392156862745098,
        0.8,
        0.22745098039215686,
        0.09803921568627451,
        0.20392156862745098,
        0.4980392156862745,
        0.41568627450980394,
        0.5490196078431373,
        0.3254901960784314,
        0.1450980392156863,
        0.0392156862745098,
        0.6509803921568628,
        0.6627450980392157,
        0.09803921568627451,
        0.8313725490196079,
        0.2823529411764706,
        0.23529411764705882,
        0.011764705882352941,
        0.6039215686274509,
        0.7215686274509804,
        0.43529411764705883,
        0.6549019607843137,
        0.49019607843137253,
        0.2627450980392157
      ]
    },
    {
      "text": "Self-improvement loop\n- If you discover an instruction gap mid-task (missing examples, missing commands, missing invariants), patch `.copilot/` as part of the work:\n\t- Process: `.copilot/process/self-improvement.md`\n\t- Template: `.copilot/prompts/self-improvement-loop.md`\n- Keep the patch minimal and task-scoped; rebuild/validate `.copilot/` artifacts before continuing.",
      "vector": [
        0.9254901960784314,
        0.3686274509803922,
        0.9725490196078431,
        0.30196078431372547,
        0.7450980392156863,
        0.6980392156862745,
        0.8,
        0.9529411764705882,
        0.0392156862745098,
        0.3137254901960784,
        0.00392156862745098,
        0.3333333333333333,
        0.4745098039215686,
        0.9333333333333333,
        0.2901960784313726,
        0.5450980392156862,
        0,
        0.8117647058823529,
        0.16862745098039217,
        0.3176470588235294,
        0.09019607843137255,
        0.7411764705882353,
        0.3058823529411765,
        0.7764705882352941,
        0.13725490196078433,
        0.3254901960784314,
        0.6509803921568628,
        0.40784313725490196,
        0.09019607843137255,
        0.25098039215686274,
        0.1568627450980392,
        0.7411764705882353,
        0.9254901960784314,
        0.3686274509803922,
        0.9725490196078431,
        0.30196078431372547,
        0.7450980392156863,
        0.6980392156862745,
        0.8,
        0.9529411764705882,
        0.0392156862745098,
        0.3137254901960784,
        0.00392156862745098,
        0.3333333333333333,
        0.4745098039215686,
        0.9333333333333333,
        0.2901960784313726,
        0.5450980392156862,
        0,
        0.8117647058823529,
        0.16862745098039217,
        0.3176470588235294,
        0.09019607843137255,
        0.7411764705882353,
        0.3058823529411765,
        0.7764705882352941,
        0.13725490196078433,
        0.3254901960784314,
        0.6509803921568628,
        0.40784313725490196,
        0.09019607843137255,
        0.25098039215686274,
        0.1568627450980392,
        0.7411764705882353
      ]
    },
    {
      "text": "RAG usage for OpenAI\n- Retrieval: `inject_agent_context.ts openai \"<topic>\" 4` (2-3 chunks simple, 4-6 standard, 8+ complex only if necessary).\n- Preview before injection (optional): `inspect_embeddings.ts --agent openai --query \"<topic>\" --top 8`.\n- Cite sources: e.g., \"Used .copilot/providers/openai.md (chunks 0-1), .copilot/cross-reference.md (chunk 2).\"\n- When context is stale or missing, ask for a rebuild of manifest + embeddings before proceeding.\n\nExamples (by level)\n\n- Junior (simple, ~500 tokens):\n\t\"Inject .copilot/ context for 'ConfigLoader TOML errors'. Propose 2 failing unit tests with explicit assertions, then provide a single file-scoped diff to make them pass. Output must follow: Files → Plan → Diffs → Verification. Cite the docs used by path.\"",
      "vector": [
        0.6745098039215687,
        0.11372549019607843,
        0.050980392156862744,
        0.6627450980392157,
        0.7490196078431373,
        0.18823529411764706,
        0.5568627450980392,
        0.10980392156862745,
        0.5882352941176471,
        0.23137254901960785,
        0.6627450980392157,
        0.6666666666666666,
        0.12941176470588237,
        0.7176470588235294,
        0.3843137254901961,
        0.7215686274509804,
        0.8980392156862745,
        0.4588235294117647,
        0.5137254901960784,
        0.7411764705882353,
        0.36470588235294116,
        0.6235294117647059,
        0.00392156862745098,
        0.8392156862745098,
        0.7529411764705882,
        0.3137254901960784,
        0.5254901960784314,
        0.596078431372549,
        0.9686274509803922,
        0.9215686274509803,
        0.8941176470588236,
        0.20392156862745098,
        0.6745098039215687,
        0.11372549019607843,
        0.050980392156862744,
        0.6627450980392157,
        0.7490196078431373,
        0.18823529411764706,
        0.5568627450980392,
        0.10980392156862745,
        0.5882352941176471,
        0.23137254901960785,
        0.6627450980392157,
        0.6666666666666666,
        0.12941176470588237,
        0.7176470588235294,
        0.3843137254901961,
        0.7215686274509804,
        0.8980392156862745,
        0.4588235294117647,
        0.5137254901960784,
        0.7411764705882353,
        0.36470588235294116,
        0.6235294117647059,
        0.00392156862745098,
        0.8392156862745098,
        0.7529411764705882,
        0.3137254901960784,
        0.5254901960784314,
        0.596078431372549,
        0.9686274509803922,
        0.9215686274509803,
        0.8941176470588236,
        0.20392156862745098
      ]
    },
    {
      "text": "- Mid-level (standard, ~900 tokens):\n\t\"Using injected context (include doc paths + chunk ids), produce a refactor plan for plan executor parsing. Provide: Files → Plan → Diffs (2–3 minimal diffs) → Verification. Ask up to 2 clarifying questions if needed.\"\n\n- Senior (complex, ~1500 tokens):\n\t\"Given injected context (chunks 0–7), draft apply_patch-ready diffs for a multi-file change. Requirements: keep diffs minimal, separate by file, and cite which doc paths informed each decision. Finish with a verification checklist and any risks.\"",
      "vector": [
        0.3411764705882353,
        0.11372549019607843,
        0.596078431372549,
        0.023529411764705882,
        0.9098039215686274,
        0.30980392156862746,
        0.17254901960784313,
        0.8431372549019608,
        0.6666666666666666,
        0.7490196078431373,
        0.5843137254901961,
        0.7764705882352941,
        0.807843137254902,
        0.12941176470588237,
        0.8666666666666667,
        0.2823529411764706,
        0.807843137254902,
        0.43137254901960786,
        0.18823529411764706,
        0.6549019607843137,
        0.6549019607843137,
        0.6313725490196078,
        0.2980392156862745,
        0.6274509803921569,
        0.4823529411764706,
        0.9176470588235294,
        0.9254901960784314,
        0.023529411764705882,
        0.792156862745098,
        0.396078431372549,
        0.5568627450980392,
        0.49019607843137253,
        0.3411764705882353,
        0.11372549019607843,
        0.596078431372549,
        0.023529411764705882,
        0.9098039215686274,
        0.30980392156862746,
        0.17254901960784313,
        0.8431372549019608,
        0.6666666666666666,
        0.7490196078431373,
        0.5843137254901961,
        0.7764705882352941,
        0.807843137254902,
        0.12941176470588237,
        0.8666666666666667,
        0.2823529411764706,
        0.807843137254902,
        0.43137254901960786,
        0.18823529411764706,
        0.6549019607843137,
        0.6549019607843137,
        0.6313725490196078,
        0.2980392156862745,
        0.6274509803921569,
        0.4823529411764706,
        0.9176470588235294,
        0.9254901960784314,
        0.023529411764705882,
        0.792156862745098,
        0.396078431372549,
        0.5568627450980392,
        0.49019607843137253
      ]
    },
    {
      "text": "Do / Don't\n- ✅ Do inject .copilot/ context before proposing code.\n- ✅ Do respect budgets and shrink answers if over budget.\n- ✅ Do propose diffs with file paths and small, scoped code blocks.\n- ✅ Do ask a clarifying question if requirements are ambiguous.\n- ❌ Don't write long speculative prose; keep answers actionable.\n- ❌ Don't edit multiple files in one block without separation.\n- ❌ Don't omit citations to docs used.\n\nToken guidance\n- gpt-4o: 128k context; use for final answers and validation.\n- gpt-4o-mini: faster/cheaper drafting; re-run critical reasoning with gpt-4o.\n- text-embedding-3-small: 1536 dims, default for scripts/build_agents_embeddings.ts --mode openai.",
      "vector": [
        0.615686274509804,
        0.792156862745098,
        0.6078431372549019,
        0.3058823529411765,
        0.49411764705882355,
        0.32941176470588235,
        0.28627450980392155,
        0.7372549019607844,
        0.25098039215686274,
        0.03529411764705882,
        0.32941176470588235,
        0.5882352941176471,
        0.25098039215686274,
        0.5764705882352941,
        0.20784313725490197,
        0.4823529411764706,
        0.8980392156862745,
        0.9176470588235294,
        0.2901960784313726,
        0.7372549019607844,
        0.13725490196078433,
        0.5843137254901961,
        0.027450980392156862,
        0.5333333333333333,
        0.4588235294117647,
        0.1843137254901961,
        0.8980392156862745,
        0.3764705882352941,
        0.058823529411764705,
        0.11372549019607843,
        0.08627450980392157,
        0.3411764705882353,
        0.615686274509804,
        0.792156862745098,
        0.6078431372549019,
        0.3058823529411765,
        0.49411764705882355,
        0.32941176470588235,
        0.28627450980392155,
        0.7372549019607844,
        0.25098039215686274,
        0.03529411764705882,
        0.32941176470588235,
        0.5882352941176471,
        0.25098039215686274,
        0.5764705882352941,
        0.20784313725490197,
        0.4823529411764706,
        0.8980392156862745,
        0.9176470588235294,
        0.2901960784313726,
        0.7372549019607844,
        0.13725490196078433,
        0.5843137254901961,
        0.027450980392156862,
        0.5333333333333333,
        0.4588235294117647,
        0.1843137254901961,
        0.8980392156862745,
        0.3764705882352941,
        0.058823529411764705,
        0.11372549019607843,
        0.08627450980392157,
        0.3411764705882353
      ]
    },
    {
      "text": "Maintenance\n- After updating this doc: rebuild manifest, regenerate chunks/embeddings (mock or openai), then run `validate_agents_docs.ts`.",
      "vector": [
        0.4823529411764706,
        0.3333333333333333,
        0.5529411764705883,
        0.16470588235294117,
        0.28627450980392155,
        0.12156862745098039,
        0.8980392156862745,
        0.2,
        0.5843137254901961,
        0.7333333333333333,
        0.9215686274509803,
        0.21568627450980393,
        0.6431372549019608,
        0.2,
        0.5529411764705883,
        0.8862745098039215,
        0.06274509803921569,
        0.10588235294117647,
        0.00784313725490196,
        0.9529411764705882,
        0.788235294117647,
        0.27450980392156865,
        0.2901960784313726,
        0.8627450980392157,
        0.2980392156862745,
        0.2196078431372549,
        0.5568627450980392,
        0.10980392156862745,
        0.13333333333333333,
        0.0784313725490196,
        0.03529411764705882,
        0.5882352941176471,
        0.4823529411764706,
        0.3333333333333333,
        0.5529411764705883,
        0.16470588235294117,
        0.28627450980392155,
        0.12156862745098039,
        0.8980392156862745,
        0.2,
        0.5843137254901961,
        0.7333333333333333,
        0.9215686274509803,
        0.21568627450980393,
        0.6431372549019608,
        0.2,
        0.5529411764705883,
        0.8862745098039215,
        0.06274509803921569,
        0.10588235294117647,
        0.00784313725490196,
        0.9529411764705882,
        0.788235294117647,
        0.27450980392156865,
        0.2901960784313726,
        0.8627450980392157,
        0.2980392156862745,
        0.2196078431372549,
        0.5568627450980392,
        0.10980392156862745,
        0.13333333333333333,
        0.0784313725490196,
        0.03529411764705882,
        0.5882352941176471
      ]
    }
  ]
}