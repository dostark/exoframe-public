{
  "path": "agents/prompts/refactoring-with-thinking.md",
  "title": "Refactoring with Thinking Protocol Prompt",
  "vecs": [
    {
      "text": "# Refactoring with Thinking Protocol Prompt\n\n## Prompt Template\n\n```\nI need to refactor [component/pattern] to [goal].\n\nUse your thinking protocol:\n\n<thinking>\n1. ANALYZE: Read relevant files, check dependencies, identify risks\n2. PLAN: List tool calls needed (parallel reads where possible)\n3. EXECUTE: Make changes incrementally\n4. SYNTHESIZE: Verify tests pass, coverage maintained\n5. VERIFY: Check Implementation Plan requirements met\n</thinking>\n\nContext injection:\ndeno run --allow-read scripts/inject_agent_context.ts claude \"refactoring [pattern] [component]\" 6",
      "vector": [
        0.4823529411764706,
        0.9098039215686274,
        0.8352941176470589,
        0.08235294117647059,
        0.19215686274509805,
        0.9254901960784314,
        0.8509803921568627,
        0.023529411764705882,
        0.9686274509803922,
        0.5294117647058824,
        0.8509803921568627,
        0.40784313725490196,
        0.47843137254901963,
        0.1450980392156863,
        0.3137254901960784,
        0.29411764705882354,
        0.03529411764705882,
        0.39215686274509803,
        0.4666666666666667,
        0.23137254901960785,
        0.4980392156862745,
        0.054901960784313725,
        0.8784313725490196,
        0.9019607843137255,
        0.6509803921568628,
        0.5215686274509804,
        0.49019607843137253,
        0.13725490196078433,
        0.22745098039215686,
        0.2980392156862745,
        0.25098039215686274,
        0.8431372549019608,
        0.4823529411764706,
        0.9098039215686274,
        0.8352941176470589,
        0.08235294117647059,
        0.19215686274509805,
        0.9254901960784314,
        0.8509803921568627,
        0.023529411764705882,
        0.9686274509803922,
        0.5294117647058824,
        0.8509803921568627,
        0.40784313725490196,
        0.47843137254901963,
        0.1450980392156863,
        0.3137254901960784,
        0.29411764705882354,
        0.03529411764705882,
        0.39215686274509803,
        0.4666666666666667,
        0.23137254901960785,
        0.4980392156862745,
        0.054901960784313725,
        0.8784313725490196,
        0.9019607843137255,
        0.6509803921568628,
        0.5215686274509804,
        0.49019607843137253,
        0.13725490196078433,
        0.22745098039215686,
        0.2980392156862745,
        0.25098039215686274,
        0.8431372549019608
      ]
    },
    {
      "text": "Requirements from agents/:\n- Follow Service Pattern from agents/source/exoframe.md\n- Maintain test coverage per agents/tests/testing.md\n- Update docs per agents/docs/documentation.md\n- Use PathResolver for all file operations\n- Log changes with EventLogger\n\nShow your thinking explicitly in <thinking> tags before each major step.\n```\n\n## Example Usage\n\n**User:**\n```\nI need to refactor database initialization code to extract a reusable helper.\n\nUse your thinking protocol:",
      "vector": [
        0.17254901960784313,
        0.8117647058823529,
        0.49019607843137253,
        0.12549019607843137,
        0.023529411764705882,
        0.43529411764705883,
        0.7529411764705882,
        0.011764705882352941,
        0.9450980392156862,
        0.9176470588235294,
        0.7568627450980392,
        0.1607843137254902,
        0.34509803921568627,
        0.12549019607843137,
        0.1450980392156863,
        0.592156862745098,
        0.611764705882353,
        0.7254901960784313,
        0.5686274509803921,
        0.08235294117647059,
        0.8901960784313725,
        0.8235294117647058,
        0.7215686274509804,
        0.3843137254901961,
        0.08235294117647059,
        0.10196078431372549,
        0.9450980392156862,
        0.14901960784313725,
        0.8980392156862745,
        0.9372549019607843,
        0.5803921568627451,
        0.7490196078431373,
        0.17254901960784313,
        0.8117647058823529,
        0.49019607843137253,
        0.12549019607843137,
        0.023529411764705882,
        0.43529411764705883,
        0.7529411764705882,
        0.011764705882352941,
        0.9450980392156862,
        0.9176470588235294,
        0.7568627450980392,
        0.1607843137254902,
        0.34509803921568627,
        0.12549019607843137,
        0.1450980392156863,
        0.592156862745098,
        0.611764705882353,
        0.7254901960784313,
        0.5686274509803921,
        0.08235294117647059,
        0.8901960784313725,
        0.8235294117647058,
        0.7215686274509804,
        0.3843137254901961,
        0.08235294117647059,
        0.10196078431372549,
        0.9450980392156862,
        0.14901960784313725,
        0.8980392156862745,
        0.9372549019607843,
        0.5803921568627451,
        0.7490196078431373
      ]
    },
    {
      "text": "<thinking>\n1. ANALYZE: Read all files using initTestDbService(), check if helper exists, identify import dependencies\n2. PLAN: grep for \"initTestDbService\", read test helpers, propose new location (tests/helpers/db.ts)\n3. EXECUTE: Create helper, update imports in 2-3 files as example\n4. SYNTHESIZE: Run affected tests, verify coverage\n5. VERIFY: Check Implementation Plan has db helper extraction step\n</thinking>\n\nContext injection:\ndeno run --allow-read scripts/inject_agent_context.ts claude \"refactoring database testing helpers\" 6\n\nRequirements from agents/:\n- Follow Service Pattern from agents/source/exoframe.md\n- Maintain test coverage per agents/tests/testing.md\n- Update docs per agents/docs/documentation.md\n- Use proper cleanup patterns\n- Log changes with EventLogger",
      "vector": [
        0.2627450980392157,
        0.1607843137254902,
        0.4745098039215686,
        0.4392156862745098,
        0.20392156862745098,
        0.16862745098039217,
        0.027450980392156862,
        0.7372549019607844,
        0.1803921568627451,
        0.8745098039215686,
        0.36470588235294116,
        0.4470588235294118,
        0.3254901960784314,
        0.9098039215686274,
        0.9254901960784314,
        0.0392156862745098,
        0.1803921568627451,
        0.4745098039215686,
        0.9254901960784314,
        0.6784313725490196,
        0.3568627450980392,
        0.7098039215686275,
        0.27058823529411763,
        0.13333333333333333,
        0.6823529411764706,
        0.0784313725490196,
        0.4117647058823529,
        0.7450980392156863,
        0.3137254901960784,
        0.8784313725490196,
        0.41568627450980394,
        0.48627450980392156,
        0.2627450980392157,
        0.1607843137254902,
        0.4745098039215686,
        0.4392156862745098,
        0.20392156862745098,
        0.16862745098039217,
        0.027450980392156862,
        0.7372549019607844,
        0.1803921568627451,
        0.8745098039215686,
        0.36470588235294116,
        0.4470588235294118,
        0.3254901960784314,
        0.9098039215686274,
        0.9254901960784314,
        0.0392156862745098,
        0.1803921568627451,
        0.4745098039215686,
        0.9254901960784314,
        0.6784313725490196,
        0.3568627450980392,
        0.7098039215686275,
        0.27058823529411763,
        0.13333333333333333,
        0.6823529411764706,
        0.0784313725490196,
        0.4117647058823529,
        0.7450980392156863,
        0.3137254901960784,
        0.8784313725490196,
        0.41568627450980394,
        0.48627450980392156
      ]
    },
    {
      "text": "Show your thinking explicitly in <thinking> tags before each major step.\n```\n\n## Expected Response Pattern\n\nClaude should show thinking for each phase:\n```\n<thinking>\nANALYZE phase:\n- Found 12 files calling initTestDbService()\n- No existing db.ts helper in tests/helpers/\n- Risk: Circular dependencies if placed in wrong location\n- Dependencies: All test files import from tests/helpers/\n\nPLAN phase:\nTool calls needed:\n1. grep_search for \"initTestDbService\" (get usage count)\n2. Parallel read: tests/helpers/test_utils.ts, tests/db_test.ts (patterns)\n3. Create tests/helpers/db.ts with exported helper\n4. Update 2 representative files as examples\n5. Run tests to verify\n</thinking>\n\n[then execute the plan with actual tool calls]\n```",
      "vector": [
        0.6196078431372549,
        0.4588235294117647,
        0.9098039215686274,
        0.34901960784313724,
        0.8470588235294118,
        0.07450980392156863,
        0.35294117647058826,
        0.47843137254901963,
        0.4196078431372549,
        0.20392156862745098,
        0.9607843137254902,
        0.9529411764705882,
        0.9333333333333333,
        0.38823529411764707,
        0.4666666666666667,
        0.2549019607843137,
        0.28627450980392155,
        0.9137254901960784,
        0.13333333333333333,
        0.9607843137254902,
        0.6196078431372549,
        0.3215686274509804,
        0.14901960784313725,
        0.4196078431372549,
        0.5725490196078431,
        0.09803921568627451,
        0.5450980392156862,
        0.8313725490196079,
        0.8313725490196079,
        0.2235294117647059,
        0.3607843137254902,
        0.10196078431372549,
        0.6196078431372549,
        0.4588235294117647,
        0.9098039215686274,
        0.34901960784313724,
        0.8470588235294118,
        0.07450980392156863,
        0.35294117647058826,
        0.47843137254901963,
        0.4196078431372549,
        0.20392156862745098,
        0.9607843137254902,
        0.9529411764705882,
        0.9333333333333333,
        0.38823529411764707,
        0.4666666666666667,
        0.2549019607843137,
        0.28627450980392155,
        0.9137254901960784,
        0.13333333333333333,
        0.9607843137254902,
        0.6196078431372549,
        0.3215686274509804,
        0.14901960784313725,
        0.4196078431372549,
        0.5725490196078431,
        0.09803921568627451,
        0.5450980392156862,
        0.8313725490196079,
        0.8313725490196079,
        0.2235294117647059,
        0.3607843137254902,
        0.10196078431372549
      ]
    }
  ]
}